diff -Naur pwlib_v1_9_0.orig/make/common.mak pwlib_v1_9_0/make/common.mak
--- pwlib_v1_9_0.orig/make/common.mak	2005-05-18 18:40:21.000000000 +0200
+++ pwlib_v1_9_0/make/common.mak	2005-05-18 18:41:20.000000000 +0200
@@ -384,6 +384,7 @@
 	$(LD)   --split-by-reloc 65535 -r   $(OBJS) -o $@ 
 endif
 
+ifdef PWLIB_BUILD
 ifdef DEBUG
 
 ifneq (,$(wildcard $(PWLIBDIR)/src/ptlib/unix))
@@ -399,6 +400,7 @@
 endif
 
 endif
+endif 
 
 CLEAN_FILES += $(TARGET)
 
diff -Naur pwlib_v1_9_0.orig/make/gui.mak pwlib_v1_9_0/make/gui.mak
--- pwlib_v1_9_0.orig/make/gui.mak	2005-05-18 18:40:21.000000000 +0200
+++ pwlib_v1_9_0/make/gui.mak	2005-05-18 18:42:20.000000000 +0200
@@ -64,11 +64,11 @@
 #
 
 
-include $(PWLIBDIR)/make/defaultgui.mak
+include $(PWLIBMAKEDIR)/defaultgui.mak
 
 ifneq (,$(GUI_TYPE))
 
-include $(PWLIBDIR)/make/$(GUI_TYPE).mak
+include $(PWLIBMAKEDIR)/$(GUI_TYPE).mak
 
 ifndef	GUI_SRC_NAME
 GUI_SRC_NAME	= $(GUI_TYPE)
diff -Naur pwlib_v1_9_0.orig/make/ptbuildopts.mak.in pwlib_v1_9_0/make/ptbuildopts.mak.in
--- pwlib_v1_9_0.orig/make/ptbuildopts.mak.in	2005-05-18 18:40:21.000000000 +0200
+++ pwlib_v1_9_0/make/ptbuildopts.mak.in	2005-05-18 18:49:20.000000000 +0200
@@ -1,13 +1,7 @@
 # This file is automatically generated by autoconf
 #
 
-ifndef PWLIBDIR
-	echo "No PWLIBDIR environment variable defined!"
-	echo "You need to define PWLIBDIR!"
-	echo "Try something like:"
-	echo "PWLIBDIR = $(HOME)/pwlib"
-	exit 1
-endif
+PWLIBDIR   = @INSTALLPREFIX@
 
 MACHTYPE   = @MACHTYPE@
 OSTYPE	   = @OSTYPE@
--- pwlib-1.9.2/make/ptlib-config.in.orig	2005-09-18 13:05:36.000000000 +0200
+++ pwlib-1.9.2/make/ptlib-config.in	2006-01-22 20:24:46.523660000 +0100
@@ -6,10 +6,10 @@
 
 VERSION="@PWLIB_VERSION@"
 CCFLAGS="@STDCCFLAGS@"
-LDFLAGS="@LDFLAGS@"
+LDFLAGS=
 LIBS="@ENDLDLIBS@ -lpt"
 LIBDIR="@LIBDIR@"
-PWINSTDIR="@INSTALLPREFIX@/share/pwlib"
+PWINSTDIR="@INSTALLPREFIX@"
 MACHTYPE="@MACHTYPE@"
 OSTYPE="@OSTYPE@"
 OSRELEASE="@OSRELEASE@"
--- pwlib-1.9.2/make/ptlib.mak.orig	2005-08-14 15:12:42.000000000 +0200
+++ pwlib-1.9.2/make/ptlib.mak	2006-01-22 20:25:38.954936750 +0100
@@ -41,15 +41,13 @@
 #
 
 ifndef PWLIBDIR
-
-$(error No PWLIBDIR environment variable defined! \
-You need to define PWLIBDIR! \
-Try something like: \
-PWLIBDIR = $(HOME)/pwlib)
-
+PWLIBDIR=/usr
+endif
+ifndef PWLIBMAKEDIR
+PWLIBMAKEDIR=/usr/share/pwlib/make
 endif
 
-include $(PWLIBDIR)/make/unix.mak
-include $(PWLIBDIR)/make/common.mak
+include $(PWLIBMAKEDIR)/unix.mak
+include $(PWLIBMAKEDIR)/common.mak
 
 # End of ptlib.mak
diff -Naur pwlib_v1_9_0.orig/make/pwlib.mak pwlib_v1_9_0/make/pwlib.mak
--- pwlib_v1_9_0.orig/make/pwlib.mak	2005-05-18 18:40:21.000000000 +0200
+++ pwlib_v1_9_0/make/pwlib.mak	2005-05-18 18:45:50.000000000 +0200
@@ -47,15 +47,14 @@
 #
 
 ifndef PWLIBDIR
-	echo "No PWLIBDIR environment variable defined!"
-	echo "You need to define PWLIBDIR!"
-	echo "Try something like:"
-	echo "PWLIBDIR = $(HOME)/pwlib"
-	exit 1
+PWLIBDIR=/usr
+endif
+ifndef PWLIBMAKEDIR
+PWLIBMAKEDIR=/usr/share/pwlib/make
 endif
 
-include $(PWLIBDIR)/make/unix.mak
-include $(PWLIBDIR)/make/gui.mak
-include $(PWLIBDIR)/make/common.mak
+include $(PWLIBMAKEDIR)/unix.mak
+include $(PWLIBMAKEDIR)/gui.mak
+include $(PWLIBMAKEDIR)/common.mak
 
 # End of pwlib.mak
diff -Naur pwlib_v1_9_0.orig/make/unix.mak pwlib_v1_9_0/make/unix.mak
--- pwlib_v1_9_0.orig/make/unix.mak	2005-05-18 18:40:21.000000000 +0200
+++ pwlib_v1_9_0/make/unix.mak	2005-05-18 18:48:27.000000000 +0200
@@ -134,17 +134,16 @@
 #
 
 ifndef PWLIBDIR
-	echo "No PWLIBDIR environment variable defined!"
-	echo "You need to define PWLIBDIR!"
-	echo "Try something like:"
-	echo "PWLIBDIR = $(HOME)/pwlib"
-	exit 1
+PWLIBDIR=/usr
+endif
+ifndef PWLIBMAKEDIR
+PWLIBMAKEDIR=/usr/share/pwlib/make
 endif
 
 ####################################################
 
 # include generated build options file, then include it
-include $(PWLIBDIR)/make/ptbuildopts.mak
+include $(PWLIBMAKEDIR)/ptbuildopts.mak
 
 ###############################################################################
 #
@@ -367,10 +366,6 @@
 # any -W overrides won't have any effect
 STDCCFLAGS += -Wall 
 
-ifdef RPM_OPT_FLAGS
-STDCCFLAGS	+= $(RPM_OPT_FLAGS)
-endif
-
 ifneq ($(OSTYPE),rtems)
 ifndef SYSINCDIR
 SYSINCDIR := /usr/include
@@ -415,7 +410,7 @@
 
 
 STATIC_LIBS	:= libstdc++.a libg++.a libm.a libc.a
-SYSLIBDIR	:= $(shell $(PWLIBDIR)/make/ptlib-config --libdir)
+SYSLIBDIR	:= $(shell $(PWLIBDIR)/bin/ptlib-config --libdir)
 
 endif # linux
 
@@ -861,7 +856,7 @@
 endif
 
 ifndef INSTALLLIB_DIR
-INSTALLLIB_DIR	= $(INSTALL_DIR)/lib
+INSTALLLIB_DIR	= $(subst $(PWLIBDIR),$(INSTALL_DIR),$(SYSLIBDIR))
 endif
 
 
@@ -888,7 +883,7 @@
 UNIX_SRC_DIR	= $(PWLIBDIR)/src/ptlib/unix
 endif
 
-PW_LIBDIR	= $(PWLIBDIR)/lib
+PW_LIBDIR	= $(SYSLIBDIR)
 
 # set name of the PT library
 PTLIB_BASE	= pt
@@ -929,7 +924,7 @@
 # define ESDDIR variables if installed
 ifdef  ESDDIR
 STDCCFLAGS	+= -I$(ESDDIR)/include -DUSE_ESD=1
-ENDLDLIBS	+= $(ESDDIR)/lib/libesd.a  # to avoid name conflicts
+ENDLDLIBS	+= -lesd
 HAS_ESD		= 1
 endif
 
diff -Naur pwlib_v1_9_0.orig/Makefile.in pwlib_v1_9_0/Makefile.in
--- pwlib_v1_9_0.orig/Makefile.in	2005-05-18 18:40:21.000000000 +0200
+++ pwlib_v1_9_0/Makefile.in	2005-05-18 18:54:06.000000000 +0200
@@ -250,30 +250,18 @@
                      $(DESTDIR)$(PREFIX)/share/pwlib/make ; \
 		do mkdir -p $$dir ; chmod 755 $$dir ; \
 	done )
-	$(INSTALL) -m 444 lib/$(PTLIB_FILE).@MAJOR_VERSION@.@MINOR_VERSION@.@BUILD_NUMBER@ $(DESTDIR)$(LIBDIR)
-	(cd $(DESTDIR)$(LIBDIR) ; \
-		rm -f  $(PTLIB_FILE).@MAJOR_VERSION@.@MINOR_VERSION@ ; \
-		ln -sf $(PTLIB_FILE).@MAJOR_VERSION@.@MINOR_VERSION@.@BUILD_NUMBER@ $(PTLIB_FILE).@MAJOR_VERSION@.@MINOR_VERSION@ \
-	)
-	(cd $(DESTDIR)$(LIBDIR) ; \
-		rm -f  $(PTLIB_FILE).@MAJOR_VERSION@ ; \
-		ln -sf $(PTLIB_FILE).@MAJOR_VERSION@.@MINOR_VERSION@.@BUILD_NUMBER@ $(PTLIB_FILE).@MAJOR_VERSION@ \
-	)
+	$(INSTALL) lib/$(PTLIB_FILE).@MAJOR_VERSION@.@MINOR_VERSION@.@BUILD_NUMBER@ $(DESTDIR)$(LIBDIR)
 	(cd $(DESTDIR)$(LIBDIR) ; \
 		rm -f  $(PTLIB_FILE) ; \
 		ln -sf $(PTLIB_FILE).@MAJOR_VERSION@.@MINOR_VERSION@.@BUILD_NUMBER@ $(PTLIB_FILE) \
 	)
-	(cd $(DESTDIR)$(LIBDIR); \
-		rm -f  libpt.@SHAREDLIBEXT@ ; \
-		ln -sf $(PTLIB_FILE) libpt.@SHAREDLIBEXT@ \
-	)
 ifeq (1, $(HAS_PLUGINS))
 	cd plugins/pwlib/device/ ; \
 	( for dir in ./* ;\
 		do mkdir -p $(DESTDIR)$(LIBDIR)/pwlib/devices/$$dir ; \
 		chmod 755 $(DESTDIR)$(LIBDIR)/pwlib/devices/$$dir ; \
 		(for fn in ./$$dir/*.so ; \
-			do $(INSTALL) -m 444 $$fn $(DESTDIR)$(LIBDIR)/pwlib/devices/$$dir; \
+			do $(INSTALL) $$fn $(DESTDIR)$(LIBDIR)/pwlib/devices/$$dir; \
 		done ); \
 	done )
 endif
@@ -291,9 +279,8 @@
 	(for fn in make/*.mak ; \
 		do $(INSTALL) -m 444 $$fn $(DESTDIR)$(PREFIX)/share/pwlib/make; \
 	done)
-	$(INSTALL) -m 755 make/ptlib-config $(DESTDIR)$(PREFIX)/share/pwlib/make/
-	(cd $(DESTDIR)$(PREFIX)/bin; rm -f ptlib-config ; ln -snf ../share/pwlib/make/ptlib-config ptlib-config)
-
+	$(INSTALL) -m 755 make/ptlib-config $(DESTDIR)$(PREFIX)/bin
+	
 uninstall:
 	rm -rf $(DESTDIR)$(PREFIX)/include/ptlib \
 	       $(DESTDIR)$(PREFIX)/include/ptclib \
